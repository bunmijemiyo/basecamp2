<h1 class="text-center" >Discussion Threads</h1>

<div class="container" >
<% @discussions.each do |discussion| %>
<div class="row justify-content-md-center" >
<div class="col-8 mt-4">
<div class="card text-center shadow mb-5 bg-white rounded">
  <div class="card-header font-italic">
  </div>
  <div class="card-body">
    <h5 class="card-title">Threads</h5>
    
    <p class="card-text"><%= truncate(discussion.discuss, length: 100) %></p>
    
    <%= link_to 'View', discussion_path(discussion), class: "btn btn-outline-success" %>
    
    <%= link_to 'Edit', edit_discussion_path(discussion), method: :edit, class: "btn btn-outline-info" %>
    <div class="d-inline-block">
    <%= button_to 'Delete', discussion_path(discussion), method: :delete, :onclick => "return confirm('Are you sure you want to delete this thread?')", class: 'btn btn-outline-danger' %>
    </div>
    <%= form_for [discussion, @messages_by_discussion[discussion]], url: discussion_messages_path(discussion) do |f| %>
    <div class="field mt-2">
      <%= f.label :comment %>
      <%= f.text_area :comment %>
    </div>

    <div class="actions">
      <%= f.submit 'Create Message' %>
    </div>
  <% end %>

    
  </div>
  <div class="card-footer text-body-secondary">
    <small>Created <%= time_ago_in_words(discussion.created_at)%> ago,
    edited <%= time_ago_in_words(discussion.updated_at) %> ago</small>
  </div>
</div>
</div>
</div>
<% end %>
</div>

